@page "/"
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using Ziggle.Web.Services;
@inject NavigationManager _navigationManager
@inject UserService _userService

<PageTitle>Index</PageTitle>

@if (!_userService.LoggedIn)
{
    <MudButton @onclick="LoginClicked">Login</MudButton>
}
else
{
    <MudText>@_userService.Username</MudText>
}

@code {
    private void LoginClicked()
    {
        var loginLink = "https://discord.com/oauth2/authorize?response_type=token&client_id=823285868420268032&scope=identify%20guilds&state=15773059ghq9183habn&redirect_uri=https://localhost:44398/callback&prompt=none";
        _navigationManager.NavigateTo(loginLink);
    }
}
